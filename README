Based on https://github.com/linuxserver/docker-qbittorrent


sudo docker build --tag qbittorrent-xpra .

sudo docker run -it \
  --name=qbittorrent-xpra \
  -e PUID=1000 \
  -e PGID=1000 \
  -e TZ=Europe/Stockholm \
  -e XPRA_PORT=3388 \
  -e DISPLAY=10 \
  -e WEBUI_PORT=6881 \
  -e UMASK=022 \
  -p 3388:3388 \
  -p 54918:54918 \
  -p 54918:54918/udp \
  -p 6881:6881 \
  -v /home/magma/Docker/qbittorrent-xpra/config:/config \
  -v /home/magma/Docker/qbittorrent-xpra/downloads:/downloads \
  qbittorrent-xpra
#  --net=docker-wg0 \

xpra --desktop-scaling=off --speaker=disabled --microphone=disabled attach tcp://127.0.0.1:3388/10
sudo docker exec -it qbittorrent-xpra s6-svc -uO /var/run/s6/services/qbittorrent


TODO:
* Routing over wireguard
* Firewall something? hopefully no changes needed.
* Port syntax to docker-compose.
* Add to github.
* Shell script that sends to pushover.
  Shouldn't be harder than to add it into the config directory and change path.



# https://nickb.dev/blog/routing-select-docker-containers-through-wireguard-vpn
#docker network create docker-vpn0 --subnet 10.193.0.0/16
docker network create docker-wg0 --subnet 172.18.0.0/24
#ip rule add from 10.193.0.0/16 table 200
ip rule add from 172.18.0.0/24 table 43
#ip route add default via 10.192.122.2 table 43
ip route add default dev wg0 table 43
docker run -ti --rm --net=docker-wg0 appropriate/curl http://httpbin.org/ip


